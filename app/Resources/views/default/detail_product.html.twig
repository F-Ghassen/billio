{% extends 'base.html.twig' %}

{% block body %}
    <div id="wrapper">
        {% include 'default/header.html.twig' %}

        <div class="container mt-5">
            <div class="row mt-5">
                <div class="col-12 mt-5">
                    <div class="section_heading text-center mt-5">
                        <h2>Product Details</h2>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">

                <div class="col-12 col-md-6">
                    <div class="single_product_thumb">
                        <div id="product_details_slider" class="carousel slide" data-ride="carousel">

                            <ol class="carousel-indicators">

                                <li class="active" data-target="#product_details_slider" data-slide-to="0" style="background-image: url({{ vich_uploader_asset(variation.images[0],'imageFile') }});">
                                </li>
                                {% for img in variation.images %}
                                    {% if false == loop.first %}
                                    <li data-target="#product_details_slider" data-slide-to="{{ loop.index0 }}" style="background-image: url({{ vich_uploader_asset(img,'imageFile') }});">
                                    </li>
                                    {% endif %}
                                {% endfor %}

                            </ol>

                            <div class="carousel-inner">
                                <div class="carousel-item active">
                                    <a class="gallery_img" href="{{ vich_uploader_asset(variation.images[0],'imageFile') }}">
                                        <img class="d-block w-100" src="{{ vich_uploader_asset(variation.images[0],'imageFile') }}" alt="slide">
                                    </a>
                                </div>
                                {% for img in variation.images %}
                                    {% if false == loop.first %}
                                    <div class="carousel-item">
                                        <a class="gallery_img" href="{{ vich_uploader_asset(img,'imageFile') }}">
                                            <img class="d-block w-100" src="{{ vich_uploader_asset(img,'imageFile') }}" alt="slide">
                                        </a>
                                    </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6">
                    <div class="single_product_desc">

                        <h4 class="title">{{ p.name }}</h4>

                        <h4 class="price">{{ p.price }} DT</h4>

                        <p class="available">Available: <span class="text-muted">In Stock</span></p>

                        <div class="single_product_ratings mb-15">
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                            <i class="fa fa-star" aria-hidden="true"></i>
                        </div>

                        <div class="widget size mb-50">
                            <h6 class="widget-title">Size</h6>
                            <div class="widget-desc">
                                <ul>
                                    {% if variation.s != 0 %}
                                        <li><a class="size-option" data-size="S" href="#">S</a></li>
                                    {% else %}
                                        <li><a class="size-option disable-size" data-size="S" href="#">S</a></li>
                                    {% endif %}
                                    {% if variation.m != 0 %}
                                        <li><a class="size-option" data-size="M" href="#">M</a></li>
                                    {% else %}
                                        <li><a class="size-option disable-size" data-size="M" href="#">M</a></li>
                                    {% endif %}
                                    {% if variation.l != 0 %}
                                        <li><a class="size-option" data-size="L" href="#">L</a></li>
                                    {% else %}
                                        <li><a class="size-option disable-size" data-size="L" href="#">L</a></li>
                                    {% endif %}
                                    {% if variation.xl != 0 %}
                                        <li><a class="size-option" data-size="XL" href="#">XL</a></li>
                                    {% else %}
                                        <li><a class="size-option disable-size" data-size="XL" href="#">XL</a></li>
                                    {% endif %}
                                    {% if variation.xxl != 0 %}
                                        <li><a class="size-option" data-size="XXL" href="#">XXL</a></li>
                                    {% else %}
                                        <li><a class="size-option disable-size" data-size="XXL" href="#">XXL</a></li>
                                    {% endif %}
                                </ul>
                            </div>
                        </div>

                        <!-- Add to Cart Form -->
                        <form action="{{ path('add_to_cart_page', {'id': p.id, 'v_id': variation.id}) }}" class="cart" method="post">
                            <select name="size-select" id="size-select" style="display: none;" required>
                                <option value="S">S</option>
                                <option value="M">M</option>
                                <option value="L">L</option>
                                <option value="XL">XL</option>
                                <option value="XXL">XXL</option>
                            </select>
                            {#
                                <div class="quantity">
                                    <span class="qty-minus" onclick="var effect = document.getElementById('qty{{ loop.index0 }}'); var qty = effect.value; if( !isNaN( qty ) &amp;&amp; qty &gt; 1 ) effect.value--;return false;"><i class="fa fa-minus" aria-hidden="true"></i></span>

                                    <input type="number" class="qty-text" id="qty{{ loop.index0 }}" step="1" min="1" max="12" name="quantity" value="1">

                                    <span class="qty-plus" onclick="var effect = document.getElementById('qty{{ loop.index0 }}'); var qty = effect.value; if( !isNaN( qty )) effect.value++;return false;"><i class="fa fa-plus" aria-hidden="true"></i></span>
                                </div>
                            #}
                            <input type="submit" name="addtocart" id="submit-btn" value="Add to cart" class="cart-submit">
                        </form>

                        <div id="accordion" class="mt-5" role="tablist">
                            <div class="card">
                                <div class="card-header" role="tab" id="headingOne">
                                    <h6 class="mb-0">
                                        <a data-toggle="collapse" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Description</a>
                                    </h6>
                                </div>

                                <div id="collapseOne" class="collapse show" role="tabpanel" aria-labelledby="headingOne" data-parent="#accordion">
                                    <div class="card-body">
                                        {{ p.description }}
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header" role="tab" id="headingThree">
                                    <h6 class="mb-0">
                                        <a class="collapsed" data-toggle="collapse" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">shipping &amp; Returns</a>
                                    </h6>
                                </div>
                                <div id="collapseThree" class="collapse" role="tabpanel" aria-labelledby="headingThree" data-parent="#accordion">
                                    <div class="card-body">
                                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Esse quo sint repudiandae suscipit ab soluta delectus voluptate, vero vitae, tempore maxime rerum iste dolorem mollitia perferendis distinctio. Quibusdam laboriosam rerum distinctio. Repudiandae fugit odit, sequi id!</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Beatae qui maxime consequatur laudantium temporibus ad et. A optio inventore deleniti ipsa.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row justify-content-center">
                <div class="col-12 text-center mt-5">
                    <div class="section_heading text-center mt-5">
                        <h3>Other Variations</h3>
                    </div>
                </div>
            </div>
            <div class="row justify-content-around">
                {% for v in variations %}
                    <div class="col-lg-3 col-md-6 row justify-content-center mt-5">
                        {% include 'default/single-product.html.twig' %}
                    </div>
                {% endfor %}
            </div>
        </div>

        {% include 'default/footer.html.twig' %}
    </div>
{% endblock %}
